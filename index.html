<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Мой Профиль Steam</title>
  
  <style>
    body {
      background-color: #121212; /* Темный фон для примера */
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      font-family: 'Helvetica Neue', sans-serif;
    }
    
    #steam-profile-card {
      background-color: #1b2838;
      color: #c7d5e0;
      border: 1px solid #4b6b88;
      border-radius: 8px;
      padding: 20px;
      width: 100%;
      max-width: 400px;
      margin: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.5);
      display: flex;
      align-items: center;
      gap: 20px; /* Расстояние между аватаром и текстом */
      transition: transform 0.2s ease-in-out;
    }

    #steam-profile-card:hover {
        transform: translateY(-5px);
    }

    #steam-profile-card .avatar {
      width: 84px;
      height: 84px;
      border-radius: 50%; /* Круглый аватар */
      border: 2px solid #66c0f4;
      flex-shrink: 0; /* Чтобы аватар не сжимался */
    }

    #steam-profile-card .profile-info {
        flex-grow: 1;
    }

    #steam-profile-card .profile-info h3 {
      margin: 0 0 10px;
      color: #ffffff;
      font-size: 1.4em;
      word-break: break-all; /* Перенос длинных никнеймов */
    }

    #steam-profile-card .profile-info p {
      margin: 4px 0 0;
      font-size: 0.95em;
    }

    #steam-profile-card .profile-info a {
      color: #66c0f4;
      text-decoration: none;
      font-weight: bold;
    }

    #steam-profile-card .profile-info a:hover {
      text-decoration: underline;
    }

    /* Стили для статусов */
    .status-online { color: #a4d007; } /* Ярко-зеленый, как в Steam */
    .status-offline { color: #8a8a8a; }
    .status-busy { color: #e53935; } /* Красный */
    .status-away { color: #fdd835; } /* Желтый */
    .status-ingame { color: #66c0f4; } /* Голубой */
    
  </style>
</head>
<body>

  <div id="steam-profile-card">
    <p>Загрузка данных из Steam...</p>
  </div>

  <script>
    // Событие, которое сработает после полной загрузки страницы
    document.addEventListener('DOMContentLoaded', function() {
      
      // --- ВАШИ ДАННЫЕ УЖЕ ВСТАВЛЕНЫ ---
      const apiKey = 'F05EEF9FA56CE1649E0E3FA946D616F7'; 
      const steamID64 = '76561199216268050'; 
      // ------------------------------------

      // URL для запроса основной информации о пользователе
      // Используем прокси, чтобы обойти CORS-ограничения, которые могут возникнуть
      const proxyUrl = 'https://cors-anywhere.herokuapp.com/';
      const apiUrl = `${proxyUrl}https://api.steampowered.com/ISteamUser/GetPlayerSummaries/v0002/?key=${apiKey}&steamids=${steamID64}`;

      const profileContainer = document.getElementById('steam-profile-card');

      // Делаем запрос к API Steam через прокси
      fetch(apiUrl)
        .then(response => {
          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }
          return response.json();
        })
        .then(data => {
          // Получаем информацию о первом (и единственном) игроке в ответе
          const player = data.response.players[0];

          if (player) {
            let statusText, statusClass;

            // Определяем статус и соответствующий CSS класс
            switch (player.personastate) {
              case 0:
                statusText = 'Не в сети';
                statusClass = 'status-offline';
                break;
              case 1:
                statusText = 'В сети';
                statusClass = 'status-online';
                break;
              case 2:
                statusText = 'Занят';
                statusClass = 'status-busy';
                break;
              case 3:
                statusText = 'Нет на месте';
                statusClass = 'status-away';
                break;
              default:
                statusText = 'Статус неизвестен';
                statusClass = 'status-offline';
            }

            // Если игрок в игре, этот статус имеет приоритет
            if (player.gameextrainfo) {
              statusText = `Играет в ${player.gameextrainfo}`;
              statusClass = 'status-ingame';
            }

            // Формируем HTML-код с полученными данными
            const profileHTML = `
              <img src="${player.avatarfull}" alt="Аватар Steam" class="avatar">
              <div class="profile-info">
                <h3><a href="${player.profileurl}" target="_blank" rel="noopener noreferrer">${player.personaname}</a></h3>
                <p class="${statusClass}"><b>Статус:</b> ${statusText}</p>
                ${player.loccountrycode ? `<p><b>Страна:</b> ${player.loccountrycode}</p>` : ''}
              </div>
            `;

            // Вставляем готовый HTML в наш контейнер
            profileContainer.innerHTML = profileHTML;

          } else {
            profileContainer.innerHTML = '<p>Не удалось найти профиль Steam с таким ID.</p>';
          }
        })
        .catch(error => {
          console.error('Ошибка при запросе к Steam API:', error);
          profileContainer.innerHTML = `<p style="color: #e53935;"><b>Ошибка при загрузке данных.</b><br>Возможно, API Steam недоступен или CORS-прокси требует активации.</p>`;
        });
    });
  </script>
</body>
</html>
